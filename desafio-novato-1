#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define TAM_FILA 5

// Struct da pe√ßa
typedef struct {
    char nome;   // Tipo da pe√ßa: I, O, T, L
    int id;      // Identificador √∫nico
} Peca;

// Fun√ß√£o que gera uma pe√ßa automaticamente
Peca gerarPeca() {
    Peca p;
    char tipos[] = {'I', 'O', 'T', 'L'};
    p.nome = tipos[rand() % 4];
    p.id = rand() % 1000; // id aleat√≥rio simples
    return p;
}

// Exibe a fila
void exibirFila(Peca fila[], int frente, int qtd) {
    printf("\n=== Fila de Pe√ßas Futuras ===\n");
    if (qtd == 0) {
        printf("Fila vazia!\n");
        return;
    }

    for (int i = 0; i < qtd; i++) {
        int pos = (frente + i) % TAM_FILA;
        printf("[%d] Pe√ßa %c (ID %d)\n", i, fila[pos].nome, fila[pos].id);
    }
}

// Remove a pe√ßa da frente (dequeue)
void jogarPeca(Peca fila[], int *frente, int *qtd) {
    if (*qtd == 0) {
        printf("\n‚ùå N√£o h√° pe√ßas para jogar!\n");
        return;
    }

    printf("\nüéÆ Jogando pe√ßa: %c (ID %d)\n",
           fila[*frente].nome,
           fila[*frente].id);

    *frente = (*frente + 1) % TAM_FILA;
    (*qtd)--;
}

// Insere nova pe√ßa na fila (enqueue)
void inserirPeca(Peca fila[], int *frente, int *qtd) {
    if (*qtd == TAM_FILA) {
        printf("\n‚ùå Fila cheia! N√£o √© poss√≠vel inserir.\n");
        return;
    }

    int final = (*frente + *qtd) % TAM_FILA;
    fila[final] = gerarPeca();
    (*qtd)++;

    printf("\n‚ûï Nova pe√ßa inserida: %c (ID %d)\n",
           fila[final].nome,
           fila[final].id);
}

int main() {
    srand(time(NULL));

    Peca fila[TAM_FILA];
    int frente = 0;   // √≠ndice da primeira pe√ßa
    int qtd = TAM_FILA;

    // Inicializando fila com 5 pe√ßas autom√°ticas
    for (int i = 0; i < TAM_FILA; i++) {
        fila[i] = gerarPeca();
    }

    int opcao;

    do {
        printf("\n===== MENU =====\n");
        printf("1 - Visualizar fila\n");
        printf("2 - Jogar pe√ßa (dequeue)\n");
        printf("3 - Inserir nova pe√ßa (enqueue)\n");
        printf("0 - Sair\n");
        printf("Escolha: ");
        scanf("%d", &opcao);

        switch (opcao) {
            case 1:
                exibirFila(fila, frente, qtd);
                break;

            case 2:
                jogarPeca(fila, &frente, &qtd);
                break;

            case 3:
                inserirPeca(fila, &frente, &qtd);
                break;

            case 0:
                printf("\nüëã Saindo...\n");
                break;

            default:
                printf("\n‚ùå Op√ß√£o inv√°lida!\n");
        }

    } while (opcao != 0);

    return 0;
}
